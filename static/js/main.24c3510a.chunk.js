(this["webpackJsonpcrypto-cost-basis"]=this["webpackJsonpcrypto-cost-basis"]||[]).push([[0],{15:function(e,t,a){e.exports=a(24)},20:function(e,t){e.exports.isAlphanumeric=function(e){return"string"===typeof e&&!!e.match(/^[0-9a-z]+$/i)},e.exports.isPositiveNumber=function(e){return"number"===typeof e&&!isNaN(e)&&e>0},e.exports.isNumberWithMaxTwoDecimals=function(e){if("number"!==typeof e||isNaN(e))return!1;var t=e.toString().split(".")[1];return!t||t.length<=2}},24:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),s=a.n(r),c=a(2),i=a(6),o=a(1),u=a(4),m=Object(n.createContext)(),d=a(12),p=a.n(d),f=function(){var e=Object(n.useContext)(m).addTransaction;Object(n.useEffect)((function(){var e=document.querySelector("#type");M.FormSelect.init(e)}));var t=Object(n.useState)({service:"",type:"sell",asset:"",transDate:"",qty:"",amount:"",fee:""}),a=Object(u.a)(t,2),r=a[0],s=a[1],d=r.service,f=r.type,E=r.asset,y=r.transDate,v=r.qty,h=r.amount,b=r.fee,g=function(e){s(Object(o.a)(Object(o.a)({},r),{},Object(i.a)({},e.target.name,e.target.value)))};return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"row section"},l.a.createElement("form",{className:"col s12",onSubmit:function(t){t.preventDefault(),e(r),s({service:"",type:"sell",asset:"",transDate:"",qty:"",amount:"",fee:""})}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"service",id:"service",value:d,placeholder:"e.g. Coinbase",className:"validate",onChange:g}),l.a.createElement("label",{htmlFor:"service"},"Trading Service")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("select",{name:"type",id:"type",value:f,onChange:g},l.a.createElement("option",{value:"buy"},"Buy"),l.a.createElement("option",{value:"sell"},"Sell")),l.a.createElement("label",{htmlFor:"type"},"Transaction Type")),l.a.createElement("div",{className:"input-field col s1"},l.a.createElement("input",{type:"text",name:"asset",id:"asset",placeholder:"e.g. BTC, ETH, LTC",className:"validate",value:E,onChange:g}),l.a.createElement("label",{htmlFor:"asset"},"Asset")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"transDate",id:"transDate",placeholder:"ISO 8601 Format",className:"datepicker",value:y,onChange:g}),l.a.createElement("label",{htmlFor:"transdate"},"Transaction Date")),l.a.createElement("div",{className:"input-field col s1"},l.a.createElement("input",{type:"text",name:"qty",id:"qty",placeholder:"Quantity",value:v,onChange:g}),l.a.createElement("label",{htmlFor:"qty"},"Quantity")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"amount",id:"amount",placeholder:"Dollar Amount",value:h,onChange:g}),l.a.createElement("label",{htmlFor:"amount"},"Transaction Amount")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"fee",id:"fee",placeholder:"Fees",value:b,onChange:g}),l.a.createElement("label",{htmlFor:"fee"},"Transaction Fee"))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"submit"},"Add Transaction",l.a.createElement("i",{className:"material-icons right"},"send"))))),l.a.createElement("div",{className:"row section"},l.a.createElement("form",{className:"col s4 push-s4",onSubmit:function(t){t.preventDefault();var a=document.getElementById("fileUpload");console.log(a,a.files.length),a.files.length>0&&p.a.parse(a.files[0],{header:!0,complete:function(t){console.log(t);var a,n=Object(c.a)(t.data);try{for(n.s();!(a=n.n()).done;){var l=a.value;e(l)}}catch(r){n.e(r)}finally{n.f()}}}),a.value="",document.getElementById("filePathText").value=""}},l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn"},l.a.createElement("span",null,"Select File"),l.a.createElement("input",{type:"file",id:"fileUpload"})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{type:"text",className:"file-path validate",id:"filePathText"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"submit"},"Parse Transactions",l.a.createElement("i",{className:"material-icons right"},"insert_drive_file"))))))},E=Object(n.createContext)(),y=function(e){var t=e.transaction;console.log(t);var a=t.service,n=t.type,r=t.asset,s=t.displayDate,c=t.qty,i=t.amount,o=t.fee;return console.log("pre-return"),l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,s),l.a.createElement("td",null,c),l.a.createElement("td",null,"$ ",i),l.a.createElement("td",null,"$ ",o))},v=a(20),h=function(){var e=Object(n.useContext)(m),t=e.transactions,a=e.showError,r=Object(n.useContext)(E).setAssetTypes;if(0===t.length)return l.a.createElement("div",{className:"container center-align"},l.a.createElement("h4",null,"Enter a transaction!"));console.log(t);return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"striped centered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Service"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Asset"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Amount"),l.a.createElement("th",null,"Fee"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement(y,{transaction:e,key:e.id})})))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"waves-effect waves-light btn",onClick:function(){var e=function(e){var t,a=Object(c.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(!v.isAlphanumeric(n.service))return n.displayDate;if(!v.isAlphanumeric(n.asset))return n.displayDate;if(!n.transDate.isValid())return n.displayDate;if(!v.isPositiveNumber(n.qty))return n.displayDate;if(n.amount<=0||!v.isNumberWithMaxTwoDecimals(n.amount))return n.displayDate;if(n.fee<0||!v.isNumberWithMaxTwoDecimals(n.fee))return n.displayDate}}catch(l){a.e(l)}finally{a.f()}return null}(t);e?a(e):r(t)}},l.a.createElement("i",{className:"material-icons right"},"attach_money"),"Calculate!")))},b=function(e){var t=e.transaction;console.log(t);var a=t.service,n=t.asset,r=t.purchaseDate,s=t.costBasis,c=t.sellDate,i=t.capitalGain;return console.log("pre-return"),l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r.format("LLLL")),l.a.createElement("td",null,s.toFixed(2)),l.a.createElement("td",null,c.format("LLLL")),l.a.createElement("td",null,"$ ",i.toFixed(2)))},g=function(){var e=Object(n.useContext)(E),t=e.assetTypes,a=e.exportByAsset;return Object(n.useEffect)((function(){$(".calculation-table").DataTable({paging:!1,ordering:!1,info:!1,searching:!1,dom:"Bfrtip",buttons:["csv"]})})),console.log("exportByAsset: ",a),console.log("assetTypes: ",t),t?l.a.createElement(n.Fragment,null,t.map((function(e){return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,e),l.a.createElement("table",{className:"striped centered calculation-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Service"),l.a.createElement("th",null,"Asset"),l.a.createElement("th",null,"Date of Purchase"),l.a.createElement("th",null,"Cost Basis"),l.a.createElement("th",null,"Date of Sale"),l.a.createElement("th",null,"Sale Proceeds"))),l.a.createElement("tbody",null,a[e].map((function(e){return l.a.createElement(b,{transaction:e,key:e.id})})))))}))):null},N=function(){var e=Object(n.useContext)(m).dateOfFirstInvalidTransaction;return e?l.a.createElement("h4",{className:"red-text text-darken-3 center-align"},"Your transaction dated ",e," has invalid input."):null},T=a(13),D=a.n(T),O=a(14),x=a.n(O),A=a(7),C=function(e,t){switch(t.type){case"ADD_TRANSACTION":return Object(o.a)(Object(o.a)({},e),{},{transactions:[].concat(Object(A.a)(e.transactions),[t.payload])});case"SHOW_ERROR":return Object(o.a)(Object(o.a)({},e),{},{dateOfFirstInvalidTransaction:t.payload});default:return e}},j=function(e){var t=Object(n.useReducer)(C,{transactions:[],sorted:{},dateOfFirstInvalidTransaction:null}),a=Object(u.a)(t,2),r=a[0],s=a[1];return l.a.createElement(m.Provider,{value:{transactions:r.transactions,sorted:r.sorted,dateOfFirstInvalidTransaction:r.dateOfFirstInvalidTransaction,addTransaction:function(e){e.id=D.a.v4(),e.transDate=x()(e.transDate),e.qty=parseFloat(e.qty),e.amount=parseFloat(e.amount),e.fee=parseFloat(e.fee),e.displayDate=e.transDate.format("llll"),s({type:"ADD_TRANSACTION",payload:e})},showError:function(e){s({type:"SHOW_ERROR",payload:e})}}},e.children)},w=function(e,t){switch(t.type){case"GET_ASSET_TYPES":return Object(o.a)(Object(o.a)({},e),{},{assetTypes:t.payload});case"ADD_ASSET_TRANSACTIONS":return{transByAsset:t.payload.assets,exportByAsset:t.payload.export,assetTypes:t.payload.types};default:return e}};var S=function(e){var t,a=[],n=[],l=Object(c.a)(e);try{for(l.s();!(t=l.n()).done;){var r=t.value;if("buy"===r.type.toLowerCase())r.costBasis=r.amount+r.fee,r.averageCost=r.costBasis/r.qty,a.push({transDate:r.transDate,service:r.service,qtyLeft:r.qty,avgCost:r.averageCost}),console.log(a);else if("sell"===r.type.toLowerCase()){var s={},i=r.qty,o=0;s.id=r.id,s.service=a[0].service,s.purchaseDate=a[0].transDate,s.asset=r.asset,s.sellDate=r.transDate;do{a[0].qtyLeft>=i?(o+=a[0].avgCost*i,a[0].qtyLeft===i?a.shift():a[0].qtyLeft-=i,i=0):(o+=a[0].avgCost*a[0].qtyLeft,i-=a[0].qtyLeft,a.shift())}while(i>0);o+=r.fee,s.capitalGain=r.amount-o,s.costBasis=o,n.push(s),r.costBasis=o,r.capitalGain=r.amount-o}}}catch(u){l.e(u)}finally{l.f()}return n},F=function(e){var t=Object(n.useReducer)(w,{assetTypes:null,transByAsset:null,exportByAsset:null}),a=Object(u.a)(t,2),r=a[0],s=a[1];return l.a.createElement(E.Provider,{value:{assetTypes:r.assetTypes,transByAsset:r.transByAsset,exportByAsset:r.exportByAsset,setAssetTypes:function(e){var t=[],a={},n=null,l={},r=Object(A.a)(e);r.sort((function(e,t){return e.transDate-t.transDate}));var i,o=Object(c.a)(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;-1===t.indexOf(u.asset)&&t.push(u.asset.toUpperCase())}}catch(f){o.e(f)}finally{o.f()}for(var m=function(){var e=p[d];n=r.filter((function(t){return t.asset.toUpperCase()===e})),l[e]=S(n),a[e]=n},d=0,p=t;d<p.length;d++)m();s({type:"ADD_ASSET_TRANSACTIONS",payload:{types:t,assets:a,export:l}})}}},e.children)},B=function(){return l.a.createElement(j,null,l.a.createElement(F,null,l.a.createElement(n.Fragment,null,l.a.createElement("h1",{className:"center-align"},"Crypto Capital Gains Calculator"),l.a.createElement("div",{className:"container"},l.a.createElement("p",{className:"flow-text center"},"This app was built mainly to get practice designing and building React apps. I am not an accountant and make no guarantees that the calculations performed within this app are accurate. I encourage you to seek the help of an accountant or tax expert with any questions regarding tax obligations for crypto transactions.")),l.a.createElement("div",{className:"divider"}),l.a.createElement(f,null),l.a.createElement(h,null),l.a.createElement(N,null),l.a.createElement(g,null))))};s.a.render(l.a.createElement(B,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.24c3510a.chunk.js.map