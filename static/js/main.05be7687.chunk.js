(this["webpackJsonpcrypto-cost-basis"]=this["webpackJsonpcrypto-cost-basis"]||[]).push([[0],{12:function(e,t,a){e.exports=a(20)},20:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),s=a.n(r),c=a(3),i=a(1),o=a(2),u=Object(n.createContext)(),m=a(9),p=a.n(m),d=function(){var e=Object(n.useContext)(u).addTransaction;Object(n.useEffect)((function(){var e=document.querySelector("#type");M.FormSelect.init(e)}));var t=Object(n.useState)({service:"",type:"sell",asset:"",transDate:"",qty:"",amount:"",fee:""}),a=Object(o.a)(t,2),r=a[0],s=a[1],m=r.service,d=r.type,y=r.asset,f=r.transDate,v=r.qty,E=r.amount,h=r.fee,b=function(e){s(Object(i.a)({},r,Object(c.a)({},e.target.name,e.target.value)))};return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"row section"},l.a.createElement("form",{className:"col s12",onSubmit:function(t){t.preventDefault(),e(r),s({service:"",type:"sell",asset:"",transDate:"",qty:"",amount:"",fee:""})}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"service",id:"service",value:m,placeholder:"e.g. Coinbase",className:"validate",onChange:b}),l.a.createElement("label",{htmlFor:"service"},"Trading Service")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("select",{name:"type",id:"type",value:d,onChange:b},l.a.createElement("option",{value:"buy"},"Buy"),l.a.createElement("option",{value:"sell"},"Sell")),l.a.createElement("label",{htmlFor:"type"},"Transaction Type")),l.a.createElement("div",{className:"input-field col s1"},l.a.createElement("input",{type:"text",name:"asset",id:"asset",placeholder:"e.g. BTC, ETH, LTC",className:"validate",value:y,onChange:b}),l.a.createElement("label",{htmlFor:"asset"},"Asset")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"transDate",id:"transDate",placeholder:"ISO 8601 Format",className:"datepicker",value:f,onChange:b}),l.a.createElement("label",{htmlFor:"transdate"},"Transaction Date")),l.a.createElement("div",{className:"input-field col s1"},l.a.createElement("input",{type:"text",name:"qty",id:"qty",placeholder:"Quantity",value:v,onChange:b}),l.a.createElement("label",{htmlFor:"qty"},"Quantity")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"amount",id:"amount",placeholder:"Dollar Amount",value:E,onChange:b}),l.a.createElement("label",{htmlFor:"amount"},"Transaction Amount")),l.a.createElement("div",{className:"input-field col s2"},l.a.createElement("input",{type:"text",name:"fee",id:"fee",placeholder:"Fees",value:h,onChange:b}),l.a.createElement("label",{htmlFor:"fee"},"Transaction Fee"))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"submit"},"Add Transaction",l.a.createElement("i",{className:"material-icons right"},"send"))))),l.a.createElement("div",{className:"row section"},l.a.createElement("form",{className:"col s4 push-s4",onSubmit:function(t){t.preventDefault();var a=document.getElementById("fileUpload");console.log(a,a.files.length),a.files.length>0&&p.a.parse(a.files[0],{header:!0,complete:function(t){console.log(t);var a=!0,n=!1,l=void 0;try{for(var r,s=t.data[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var c=r.value;e(c)}}catch(i){n=!0,l=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}}}),a.value="",document.getElementById("filePathText").value=""}},l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn"},l.a.createElement("span",null,"Select File"),l.a.createElement("input",{type:"file",id:"fileUpload"})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{type:"text",className:"file-path validate",id:"filePathText"}))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"submit"},"Parse Transactions",l.a.createElement("i",{className:"material-icons right"},"insert_drive_file"))))))},y=Object(n.createContext)(),f=function(e){var t=e.transaction;console.log(t);var a=t.service,n=t.type,r=t.asset,s=t.displayDate,c=t.qty,i=t.amount,o=t.fee;return console.log("pre-return"),l.a.createElement("tr",null,l.a.createElement("td",null,a),l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,s),l.a.createElement("td",null,c),l.a.createElement("td",null,"$ ",i),l.a.createElement("td",null,"$ ",o))},v=function(){var e=Object(n.useContext)(u).transactions,t=Object(n.useContext)(y).setAssetTypes;if(0===e.length)return l.a.createElement("div",{className:"container center-align"},l.a.createElement("h4",null,"Enter a transaction!"));console.log(e);return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"striped centered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Service"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"Asset"),l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Amount"),l.a.createElement("th",null,"Fee"))),l.a.createElement("tbody",null,e.map((function(e){return l.a.createElement(f,{transaction:e,key:e.id})})))),l.a.createElement("div",{className:"row center-align"},l.a.createElement("button",{className:"waves-effect waves-light btn",onClick:function(){t(e)}},l.a.createElement("i",{className:"material-icons right"},"attach_money"),"Calculate!")))},E=a(10),h=a.n(E),b=a(11),g=a.n(b),N=a(4),T=function(e,t){switch(t.type){case"ADD_TRANSACTION":return Object(i.a)({},e,{transactions:[].concat(Object(N.a)(e.transactions),[t.payload])});default:return e}},C=function(e){var t=Object(n.useReducer)(T,{transactions:[],sorted:{},current:null}),a=Object(o.a)(t,2),r=a[0],s=a[1];return l.a.createElement(u.Provider,{value:{transactions:r.transactions,sorted:r.sorted,current:r.current,addTransaction:function(e){e.id=h.a.v4(),e.transDate=g()(e.transDate),e.qty=parseFloat(e.qty),e.amount=parseFloat(e.amount),e.fee=parseFloat(e.fee),e.displayDate=e.transDate.format("llll"),s({type:"ADD_TRANSACTION",payload:e})}}},e.children)},D=function(e,t){switch(t.type){case"GET_ASSET_TYPES":return Object(i.a)({},e,{assetTypes:t.payload});case"ADD_ASSET_TRANSACTIONS":return{transByAsset:t.payload.assets,assetTypes:t.payload.types,exportByAsset:t.payload.export};default:return e}},A=function(e){var t=Object(n.useReducer)(D,{assetTypes:null,transByAsset:null}),a=Object(o.a)(t,2),r=a[0],s=a[1];return l.a.createElement(y.Provider,{value:{assetTypes:r.assetTypes,transByAsset:r.transByAsset,setAssetTypes:function(e){var t=[],a={},n=null,l={},r=Object(N.a)(e);r.sort((function(e,t){return e.transDate-t.transDate}));var c=!0,i=!1,o=void 0;try{for(var u,m=r[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var p=u.value;-1===t.indexOf(p.asset)&&t.push(p.asset.toUpperCase())}}catch(v){i=!0,o=v}finally{try{c||null==m.return||m.return()}finally{if(i)throw o}}for(var d=function(){var e=f[y];n=r.filter((function(t){return t.asset.toUpperCase()===e})),l[e]=function(e){var t=[],a=[],n=!0,l=!1,r=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var i=s.value;if("buy"===i.type.toLowerCase())i.costBasis=i.amount+i.fee,i.averageCost=i.costBasis/i.qty,t.push({transDate:i.transDate,service:i.service,qtyLeft:i.qty,avgCost:i.averageCost}),console.log(t);else if("sell"===i.type.toLowerCase()){var o={},u=i.qty,m=0;o.service=t[0].service,o.purchaseDate=t[0].transDate,o.asset=i.asset,o.sellDate=i.transDate;do{t[0].qtyLeft>=u?(m+=t[0].avgCost*u,t[0].qtyLeft===u?t.shift():t[0].qtyLeft-=u,u=0):(m+=t[0].avgCost*t[0].qtyLeft,u-=t[0].qtyLeft,t.shift())}while(u>0);m+=i.fee,o.capitalGain=i.amount-m,o.costBasis=m,a.push(o),i.costBasis=m,i.capitalGain=i.amount-m}}}catch(v){l=!0,r=v}finally{try{n||null==c.return||c.return()}finally{if(l)throw r}}return a}(n),a[e]=n},y=0,f=t;y<f.length;y++)d();s({type:"ADD_ASSET_TRANSACTIONS",payload:{types:t,assets:a,export:l}})}}},e.children)};var w=function(){return l.a.createElement(C,null,l.a.createElement(A,null,l.a.createElement(n.Fragment,null,l.a.createElement("h1",{className:"center-align"},"Crypto Capital Gains Calculator"),l.a.createElement("div",{className:"container"},l.a.createElement("p",{className:"flow-text center"},"This app was built mainly to get practice designing and building React apps. I am not an accountant and make no guarantees that the calculations performed within this app are accurate. I encourage you to seek the help of an accountant or tax expert with any questions regarding tax obligations for crypto transactions.")),l.a.createElement("div",{className:"divider"}),l.a.createElement(d,null),l.a.createElement(v,null))))};s.a.render(l.a.createElement(w,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.05be7687.chunk.js.map